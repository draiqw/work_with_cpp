# Решение многопоточного решения СЛАУ

Этот проект реализует программу для решения систем линейных алгебраических уравнений (СЛАУ) с матрицами, имеющими только главную и верхнюю диагонали (двухдиагональные).
Решение выполняется в многопоточном режиме с использованием шаблонного класса `Bounded` для безопасной очереди задач, `Producer` для чтения входных файлов и `Consumer` для вычисления и записи результатов.

## Структура проекта

```
project-root/
├─ bin/                # Результирующий исполняемый файл
├─ build/              # Скомпилированные объектные файлы
├─ include/            # Заголовочные файлы
│   ├ bounded.h
│   ├ epsilon.h
│   ├ matrix.h
│   └ solver.h
├─ src/                # Исходные файлы .cpp
│   ├ main.cpp
│   ├ epsilon.cpp
│   ├ matrix.cpp
│   └ solver.cpp
├─ data/
│   ├ Задачи/          # Входные текстовые файлы с задачами СЛАУ
│   └ Решения/         # Папка для хранения выходных файлов решений
└─ Makefile            # Сценарий сборки
```

* **include/** — интерфейсы классов

* **src/** — реализация методов и точка входа `main.cpp`

* **data/Задачи/** — поместите сюда входные файлы формата:

  ```
  имя_задачи.txt
  ```

  Формат файла:

  1. Первая строка: `n` — размер системы (количество неизвестных)
  2. Вторая строка: `n` чисел главной диагонали
  3. Третья строка: `n-1` чисел верхней диагонали
  4. Четвёртая строка: `n` чисел правой части системы (`b`)

* **data/Решения/** — автоматически создаётся при запуске; содержит два файла на задачу:

  * `имя_задачи_float.txt` — решение в типе `float`
  * `имя_задачи_double.txt` — решение в типе `double`

## Требования

* Компилятор: `g++` с поддержкой C++17
* Платформа: Linux (bash)

## Сборка

В корне проекта выполните:

```bash
make       # собирает проект
```

Это создаст каталог `bin/` и исполняемый файл `bin/solver`.

## Запуск

Для запуска укажите число потоков-потребителей (consumer). Например, чтобы использовать 4 потока:

```bash
make run ARGS=4
```

или напрямую:

```bash
./bin/solver 4
```

Программа последовательно просканирует все файлы в `data/Задачи`, распределит их по потокам, решит каждую СЛАУ и запишет результаты в `data/Решения`. Также в консоли вы увидите относительную погрешность $||Ax - b|| / ||b||$ для `float` и `double`:

```
[float ] имя_задачи.txt  rel.err = 1.23e-06
[double] имя_задачи.txt  rel.err = 2.34e-15
```

## Очистка

Для удаления скомпилированных файлов выполните:

```bash
make clean
```

## Пример работы

1. Поместите файлы `1.txt`, `2.txt` ... в `data/Задачи/`
2. `make run ARGS=3`
3. После завершения в `data/Решения/` появятся:

   * `1_float.txt`, `1_double.txt`
   * `2_float.txt`, `2_double.txt`
   * ...

---


# Инструкции по использованию проекта: Многопоточное решение СЛАУ

Этот документ описывает пошаговые инструкции по запуску и использованию программы для решения систем линейных алгебраических уравнений (СЛАУ) с двухдиагональными матрицами в многопоточном режиме.

---

## Шаг 1. Клонирование и подготовка

1. Склонируйте репозиторий проекта:

   ```bash
   git clone <URL-репозитория>
   cd <имя-папки>
   ```
2. Убедитесь, что в системе установлен компилятор `g++` версии не ниже 7.0 и утилита `make`.

   ```bash
   g++ --version
   make --version
   ```

---

## Шаг 2. Структура каталогов

```
project-root/
├── bin/                # Скомпилированный исполняемый файл
├── build/              # Объектные файлы и файлы зависимостей
├── data/
│   ├─ Задачи/          # Входные *.txt с задачами СЛАУ
│   └─ Решения/         # Выходные *.txt (создаётся автоматически)
├── include/            # Заголовочные файлы (.h)
│   ├─ bounded.h
│   ├─ epsilon.h
│   ├─ matrix.h
│   └─ solver.h
├── src/                # Исходные файлы (.cpp)
│   ├─ main.cpp
│   ├─ epsilon.cpp
│   ├─ matrix.cpp
│   └─ solver.cpp
└── Makefile            # Правила сборки и запуска
```

> **Примечание**: папки `data/Задачи` и `data/Решения` должны находиться внутри `data/`.

---

## Шаг 3. Подготовка входных файлов

1. Создайте директорию, если она ещё не существует:

   ```bash
   mkdir -p data/Задачи
   ```
2. Для каждой задачи создайте файл `data/Задачи/<имя>.txt` по формату:

   ```
   n
   a0 a1 ... a{n-1}
   b0 b1 ... b{n-2}
   d0 d1 ... d{n-1}
   ```

   * `n` — размер системы (количество неизвестных)
   * вторая строка — `n` главных диагоналей
   * третья строка — `n-1` элементов наддиагонали
   * четвёртая строка — `n` элементов правой части

---

## Шаг 4. Сборка проекта

1. Выполните команду сборки:

   ```bash
   make
   ```
2. После выполнения появится:

   * `bin/solver` — исполняемый файл
   * `build/` — каталоги с объектными файлами `.o` и зависимостями `.d`

---

## Шаг 5. Запуск программы

1. Убедитесь, что в папках `data/Задачи` есть хотя бы один входной файл.
2. Запустите программу с указанием числа потоков-потребителей:

   ```bash
   make run ARGS=<кол-во_потоков>
   ```

   или вручную:

   ```bash
   ./bin/solver <кол-во_потоков>
   ```
3. Пример: 4 потока

   ```bash
   make run ARGS=4
   ```

> **Важно**: `<кол-во_потоков>` — число одновременно работающих вычислительных потоков.

---

## Шаг 6. Результаты работы

1. Папка `data/Решения` будет создана автоматически, если отсутствовала.
2. В ней появятся пары файлов для каждой задачи:

   * `<имя>_float.txt` — решение в типе `float`
   * `<имя>_double.txt` — решение в типе `double`
3. В консоли вы увидите строки формата:

   ```
   [float ] <имя>.txt  rel.err = <значение>
   [double] <имя>.txt  rel.err = <значение>
   ```

   где `<значение>` — относительная погрешность $||Ax - b|| / ||b||$.

---

## Шаг 7. Очистка артефактов сборки

Для удаления всех скомпилированных файлов и каталога `bin/` выполните:

```bash
make clean
```

Для удаления результатов решения:

```bash
rm -rf data/Решения/*
```



*Автор: Роман Акрамов*
